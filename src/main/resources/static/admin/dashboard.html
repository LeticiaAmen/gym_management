<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>GYM - Panel de Administración</title>
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/dashboard.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>GYM - Panel de Administración</h1>
      <nav>
        <button onclick="showSection('clients')" class="btn">Clientes</button>
        <button onclick="showSection('payments')" class="btn">Pagos</button>
        <button onclick="showSection('reports')" class="btn">Reportes</button>
        <button onclick="logout()" class="btn btn-danger">Cerrar Sesión</button>
      </nav>
    </header>

    <!-- Sección Clientes -->
    <section id="clients-section" class="section">
      <h2>Gestión de Clientes</h2>
      <div class="filters">
        <input type="text" id="client-q" placeholder="Buscar por nombre, apellido o email" />
        <select id="client-active">
          <option value="">Todos</option>
          <option value="true">Activos</option>
          <option value="false">Inactivos</option>
        </select>
        <select id="client-payment">
          <option value="">Pago: todos</option>
          <option value="PENDING">Pendiente</option>
          <option value="UP_TO_DATE">Al día</option>
          <option value="EXPIRED">Vencido</option>
        </select>
        <button onclick="filterClients()" class="btn">Filtrar</button>
        <button onclick="clearClientFilters()" class="btn">Limpiar</button>
      </div>
      <button onclick="showClientForm()" class="btn btn-primary">Nuevo Cliente</button>
      <div class="table-wrapper">
        <table id="clients-table" class="table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Apellido</th>
              <th>Email</th>
              <th>Teléfono</th>
              <th>Estado</th>
              <th>Inicio</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <!-- Los datos se llenarán por JS -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- Sección Pagos -->
    <section id="payments-section" class="section" style="display:none">
      <h2>Gestión de Pagos</h2>
      <div class="filters">
        <select id="payment-client">
          <option value="">Todos los clientes</option>
          <!-- Se llena por JS con (id) Nombre Apellido (email) -->
        </select>
        <input type="date" id="date-from">
        <input type="date" id="date-to">
        <select id="payment-state">
          <option value="">Todos los estados</option>
          <option value="PENDING">Pendiente</option>
          <option value="UP_TO_DATE">Al día</option>
          <option value="EXPIRED">Vencido</option>
          <option value="VOIDED">Anulado</option>
        </select>
        <button onclick="filterPayments()" class="btn">Filtrar</button>
        <button id="btn-clear-payments" onclick="clearPaymentFilters()" class="btn">Limpiar</button>
      </div>
      <button onclick="showPaymentForm()" class="btn btn-primary">Registrar Pago</button>
      <div class="table-wrapper">
        <table id="payments-table" class="table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Cliente</th>
              <th>Monto</th>
              <th>Método</th>
              <th>Fecha</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <!-- Los datos se llenarán por JS -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- Sección Reportes -->
    <section id="reports-section" class="section" style="display:none">
      <h2>Reportes</h2>
      <div class="reports-grid">
        <div class="report-card">
          <h3>Pagos por Vencer (7 días)</h3>
          <button onclick="getExpiringReport()" class="btn">Ver Reporte</button>
        </div>
        <div class="report-card">
          <h3>Pagos Vencidos</h3>
          <button onclick="getOverdueReport()" class="btn">Ver Reporte</button>
        </div>
        <div class="report-card">
          <h3>Flujo de Caja</h3>
          <div class="date-range">
            <input type="date" id="cashflow-from">
            <input type="date" id="cashflow-to">
          </div>
          <button onclick="getCashflowReport()" class="btn">Ver Reporte</button>
        </div>
      </div>
      <div id="report-results" class="report-results">
        <!-- Los resultados se mostrarán aquí -->
      </div>
    </section>
  </div>

  <!-- Modales -->
  <div id="client-modal" class="modal">
    <!-- Formulario de cliente -->
  </div>
  <div id="payment-modal" class="modal">
    <!-- Formulario de pago -->
  </div>
  <div id="pause-modal" class="modal">
    <!-- Formulario de pausa -->
  </div>

  <script type="module" src="/js/api.js?v=20250912"></script>
  <script type="module" src="/js/ui.js?v=20250912"></script>
</body>
</html>